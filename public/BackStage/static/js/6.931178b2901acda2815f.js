webpackJsonp([6],{ai0y:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={name:"basetable",data:function(){return{url:"",tableData:[],cur_page:1,multipleSelection:[],select_cate:"",select_word:"",del_list:[],is_search:!1,editVisible:!1,delVisible:!1,form:{name:"",date:"",address:""},idx:-1,page:1,pages:"",goodslist:[],goodsId:"",goodsDetails:{},formAdd:{},fileList2:[],fileList1:[],fileList:[],arrival_date:"",feedback_date:""}},created:function(){this.getData()},computed:{data:function(){var e=this;return this.tableData.filter(function(t){for(var s=!1,a=0;a<e.del_list.length;a++)if(t.name===e.del_list[a].name){s=!0;break}if(!s&&t.address.indexOf(e.select_cate)>-1&&(t.name.indexOf(e.select_word)>-1||t.address.indexOf(e.select_word)>-1))return t})}},methods:{getData:function(){var e=this,t={page:this.page,list_rows:12,search:this.select_word};this.$axios.post("/api/admin/data/datalistlike",this.$qs.stringify(t),{}).then(function(t){e.goodslist=t.data.data.data,e.pages=Math.ceil(t.data.data.total/t.data.data.listRows),console.log(t)}).catch(function(e){console.log(e)})},queryIndividualData:function(){var e=this,t={id:this.goodsId};this.$axios.post("/api/admin/data/datagetone",this.$qs.stringify(t),{}).then(function(t){e.formAdd=t.data.data,console.log(t)}).catch(function(e){console.log(e)})},formatter:function(e,t){return e.address},filterTag:function(e,t){return t.tag===e},handleEdit:function(e,t){this.idx=e;var s=this.goodslist[e];this.goodsId=s.id,this.editVisible=!0,this.queryIndividualData()},handleDelete:function(e,t){this.idx=e,this.delVisible=!0},delAll:function(){var e=this.multipleSelection.length,t="";this.del_list=this.del_list.concat(this.multipleSelection);for(var s=0;s<e;s++)t+=this.multipleSelection[s].name+" ";this.$message.error("删除了"+t),this.multipleSelection=[]},handleSelectionChange:function(e){this.multipleSelection=e},saveEdit:function(){this.onSubmit(),this.getData(),this.editVisible=!1,this.$message.success("修改第 "+(this.idx+1)+" 行成功")},onSubmit:function(){var e=this;console.log(this.params),console.log(this.fileList),console.log(this.fileList1),console.log(this.arrival_date),console.log(this.feedback_date);var t={id:this.formAdd.id,goods_pic:0==this.fileList2.length?this.formAdd.goods_pic:this.fileList2,bar_code:this.formAdd.bar_code,shop_name:this.formAdd.shop_name,goods_number:this.formAdd.goods_number,supplier:this.formAdd.supplier,question:this.formAdd.question,question_analysis:this.formAdd.question_analysis,question_solutions:this.formAdd.question_solutions,arrival_date:this.$moment(this.formAdd.arrival_date).format("YYYY-MM-DD hh:mm:ss"),feedback_date:this.$moment(this.formAdd.feedback_date).format("YYYY-MM-DD hh:mm:ss"),customer_id:this.formAdd.customer_id,question_pic:0==this.fileList.length?[]:this.fileList,remark1:this.formAdd.remark1,remark2:this.formAdd.remark2,remark3:this.formAdd.remark3,remark4:this.formAdd.remark4,video:0==this.fileList1.length?this.formAdd.video:this.fileList1};this.$axios.post("/api/admin/data/datachange",t,{}).then(function(t){e.$message({message:"上传成功",type:"success"}),e.formAdd={},e.formAdd.arrival_date="",e.formAdd.feedback_date="",e.fileList=[],e.fileList1=[],e.fileList2=[],e.getData(),console.log(t)}).catch(function(e){console.log(e)})},deleteRow:function(){var e=this,t={id:this.goodslist[this.idx].id};this.$axios.post("/api/admin/data/datadelete",t,{}).then(function(t){e.getData(),e.$message.success("删除成功"),e.delVisible=!1,console.log(t)}).catch(function(e){console.log(e)})},previousPage:function(){this.page--,this.getData()},nextClick:function(){this.page++,this.getData()},handleCurrentPageChange:function(e){this.page=e,this.getData()},handlesuccess2:function(e,t,s){this.fileList2=s,console.log(s)},handleRemove2:function(e,t){this.fileList2=t,console.log(t)},handlesuccess:function(e,t,s){this.fileList=s,console.log(s)},handleRemove:function(e,t){this.fileList=t,console.log(t)},handlesuccess1:function(e,t,s){this.fileList1=s,console.log(s)},handleRemove1:function(e,t){this.fileList1=t,console.log(t)}}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"table"},[s("div",{staticClass:"crumbs"},[s("el-breadcrumb",{attrs:{separator:"/"}},[s("el-breadcrumb-item",[s("i",{staticClass:"el-icon-lx-cascades"}),e._v("前台数据管理")])],1)],1),e._v(" "),s("div",{staticClass:"container"},[s("div",{staticClass:"handle-box"},[s("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"筛选关键词"},model:{value:e.select_word,callback:function(t){e.select_word=t},expression:"select_word"}}),e._v(" "),s("el-button",{attrs:{type:"primary",icon:"search"},on:{click:e.getData}},[e._v("搜索")])],1),e._v(" "),s("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.goodslist,border:""},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._v(" "),s("el-table-column",{attrs:{prop:"goods_pic",label:"商品图片",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{staticClass:"goods_must_img"},[s("img",{attrs:{src:e.$url+t.row.goods_pic}})])]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"bar_code",label:"条形码",width:""}}),e._v(" "),s("el-table-column",{attrs:{prop:"shop_name",label:"网店名称"}}),e._v(" "),s("el-table-column",{attrs:{prop:"goods_number",label:"厂家货号"}}),e._v(" "),s("el-table-column",{attrs:{prop:"supplier",label:"供应商"}}),e._v(" "),s("el-table-column",{attrs:{prop:"question",label:"客诉问题点"}}),e._v(" "),s("el-table-column",{attrs:{prop:"question_analysis",label:"问题点分析"}}),e._v(" "),s("el-table-column",{attrs:{prop:"question_solutions",label:"问题点处理方案"}}),e._v(" "),s("el-table-column",{attrs:{prop:"arrival_date",label:"最后问题批次到货日期"}}),e._v(" "),s("el-table-column",{attrs:{prop:"feedback_date",label:"客诉首次反馈日期"}}),e._v(" "),s("el-table-column",{attrs:{prop:"customer_id",label:"客户ID"}}),e._v(" "),s("el-table-column",{attrs:{label:"操作",width:"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(s){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑/详情\n          ")]),e._v(" "),s("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(s){return e.handleDelete(t.$index,t.row)}}},[e._v("删除\n          ")])]}}])})],1),e._v(" "),s("div",{staticClass:"pagination"},[s("el-pagination",{attrs:{background:"","pager-count":7,layout:"prev, pager, next",total:10*e.pages},on:{"prev-click":e.previousPage,"next-click":e.nextClick,"current-change":e.handleCurrentPageChange}})],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"编辑",visible:e.editVisible,width:"50%"},on:{"update:visible":function(t){e.editVisible=t}}},[s("el-form",{ref:"form",attrs:{model:e.formAdd,"label-width":"170px"}},[s("el-form-item",{attrs:{label:"商品主图"}},[s("div",{staticClass:"goods_img"},[s("img",{attrs:{src:e.$url+e.formAdd.goods_pic,alt:""}}),e._v(" "),s("el-upload",{staticClass:"upload-demo",attrs:{action:e.$url+"/api/admin/file/pic",name:"image","on-success":e.handlesuccess2,"on-remove":e.handleRemove2,limit:1,"file-list":e.fileList2,"list-type":"picture"}},[s("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1)]),e._v(" "),s("el-form-item",{attrs:{label:"条形码"}},[s("el-input",{attrs:{placeholder:e.goodsDetails.bar_code},model:{value:e.formAdd.bar_code,callback:function(t){e.$set(e.formAdd,"bar_code",t)},expression:"formAdd.bar_code"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"网店名称"}},[s("el-input",{attrs:{placeholder:e.goodsDetails.shop_name},model:{value:e.formAdd.shop_name,callback:function(t){e.$set(e.formAdd,"shop_name",t)},expression:"formAdd.shop_name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"厂家货号"}},[s("el-input",{attrs:{placeholder:e.goodsDetails.goods_number},model:{value:e.formAdd.goods_number,callback:function(t){e.$set(e.formAdd,"goods_number",t)},expression:"formAdd.goods_number"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"供应商"}},[s("el-input",{attrs:{placeholder:e.goodsDetails.supplier},model:{value:e.formAdd.supplier,callback:function(t){e.$set(e.formAdd,"supplier",t)},expression:"formAdd.supplier"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"客诉问题点"}},[s("el-input",{attrs:{placeholder:e.goodsDetails.question},model:{value:e.formAdd.question,callback:function(t){e.$set(e.formAdd,"question",t)},expression:"formAdd.question"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"问题点分析"}},[s("el-input",{attrs:{placeholder:e.goodsDetails.question_analysis},model:{value:e.formAdd.question_analysis,callback:function(t){e.$set(e.formAdd,"question_analysis",t)},expression:"formAdd.question_analysis"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"最后问题批次到货日期"}},[s("el-date-picker",{attrs:{type:"datetime",placeholder:e.formAdd.arrival_date},model:{value:e.formAdd.arrival_date,callback:function(t){e.$set(e.formAdd,"arrival_date",t)},expression:"formAdd.arrival_date"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"客诉首次反馈日期"}},[s("el-date-picker",{attrs:{type:"datetime",placeholder:e.formAdd.feedback_date},model:{value:e.formAdd.feedback_date,callback:function(t){e.$set(e.formAdd,"feedback_date",t)},expression:"formAdd.feedback_date"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"客户ID"}},[s("el-input",{attrs:{placeholder:e.goodsDetails.customer_id},model:{value:e.formAdd.customer_id,callback:function(t){e.$set(e.formAdd,"customer_id",t)},expression:"formAdd.customer_id"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"问题图片1"}},[s("div",{staticClass:"goods_problem_img"},[s("viewer",{attrs:{images:e.images}},[null!=e.formAdd.question_pic1?s("img",{attrs:{src:e.$url+e.formAdd.question_pic1,alt:""}}):e._e()]),e._v(" "),null==e.formAdd.question_pic1?s("span",[e._v("暂无上传图片")]):e._e()],1)]),e._v(" "),s("el-form-item",{attrs:{label:"问题图片2"}},[s("div",{staticClass:"goods_problem_img"},[s("viewer",{attrs:{images:e.images}},[null!=e.formAdd.question_pic2?s("img",{attrs:{src:e.$url+e.formAdd.question_pic2,alt:""}}):e._e()]),e._v(" "),null==e.formAdd.question_pic2?s("span",[e._v("暂无上传图片")]):e._e(),e._v(" "),s("el-upload",{staticClass:"upload-demo",attrs:{action:e.$url+"/api/admin/file/pic",name:"image","on-success":e.handlesuccess,"on-remove":e.handleRemove,limit:4,"file-list":e.fileList,"list-type":"picture"}},[s("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1)]),e._v(" "),s("el-form-item",{attrs:{label:"问题图片3"}},[s("div",{staticClass:"goods_problem_img"},[s("viewer",{attrs:{images:e.images}},[null!=e.formAdd.question_pic3?s("img",{attrs:{src:e.$url+e.formAdd.question_pic3,alt:""}}):e._e()]),e._v(" "),null==e.formAdd.question_pic3?s("span",[e._v("暂无上传图片")]):e._e()],1)]),e._v(" "),s("el-form-item",{attrs:{label:"问题图片4"}},[s("div",{staticClass:"goods_problem_img"},[s("viewer",{attrs:{images:e.images}},[null!=e.formAdd.question_pic4?s("img",{attrs:{src:e.$url+e.formAdd.question_pic4,alt:""}}):e._e()]),e._v(" "),null==e.formAdd.question_pic4?s("span",[e._v("暂无上传图片")]):e._e()],1)]),e._v(" "),s("el-form-item",{attrs:{label:"备注1"}},[s("el-input",{attrs:{placeholder:e.goodsDetails.remark1},model:{value:e.formAdd.remark1,callback:function(t){e.$set(e.formAdd,"remark1",t)},expression:"formAdd.remark1"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"备注2"}},[s("el-input",{attrs:{placeholder:e.goodsDetails.remark2},model:{value:e.formAdd.remark2,callback:function(t){e.$set(e.formAdd,"remark2",t)},expression:"formAdd.remark2"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"备注3"}},[s("el-input",{attrs:{placeholder:e.goodsDetails.remark3},model:{value:e.formAdd.remark3,callback:function(t){e.$set(e.formAdd,"remark3",t)},expression:"formAdd.remark3"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"备注4"}},[s("el-input",{attrs:{placeholder:e.goodsDetails.remark4},model:{value:e.formAdd.remark4,callback:function(t){e.$set(e.formAdd,"remark4",t)},expression:"formAdd.remark4"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"视频"}},[s("div",{staticClass:"goods_mp4"},[s("video",{attrs:{src:e.$url+e.formAdd.video,controls:"controls"}}),e._v(" "),s("el-upload",{staticClass:"upload-demo",attrs:{action:e.$url+"/api/admin/file/video",name:"video","on-success":e.handlesuccess1,"on-remove":e.handleRemove1,limit:1,"file-list":e.fileList1,"list-type":"picture"}},[s("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1)])],1),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("确 定")])],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"提示",visible:e.delVisible,width:"300px",center:""},on:{"update:visible":function(t){e.delVisible=t}}},[s("div",{staticClass:"del-dialog-cnt"},[e._v("删除不可恢复，是否确定删除？")]),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.delVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.deleteRow}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var l=s("C7Lr")(a,i,!1,function(e){s("pO+M")},"data-v-da9d0976",null);t.default=l.exports},"pO+M":function(e,t){}});
//# sourceMappingURL=6.931178b2901acda2815f.js.map